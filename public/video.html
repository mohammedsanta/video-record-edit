<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <link rel="stylesheet" href="/video.css"> -->
    <link href="/style/video.css" rel="stylesheet">
    <link href="/style/resize.css" rel="stylesheet">
    <title>Video Editing Tool</title>
</head>
<body>

    <div class="main">

        <div class="top">

            <div class="vid">
                <video id="videoPlayer" controls autoplay>
                    <source id="videoSrc" src="http://127.0.0.1:3000/video?path=D:\Coding\JS\nodejs\videoedit\uploads/uploadedoutput.mp4" type="video/mp4" />
                </video>
    
                <div class="keys">
    
                    <button id="backward"><img src="/img/forward.png" alt="" style="
                        transform: scaleX(-1);
                        -moz-transform: scaleX(-1);
                        -webkit-transform: scaleX(-1);
                        -ms-transform: scaleX(-1);
                    "></button>

                    <div class="timing" style="display: flex;">
                        <div id="timeDisplay" class="time-display"> 0:00.00 </div>
                        <div class="time-video"> / 0:00.00</div>
                    </div>


                    <button id="forward"><img src="/img/forward.png" alt=""></button>
    
                </div>
    
                <!-- <h1>Using Keys for moving video like : arrow up or down for volume sound of video and left or right for moving</h1> -->
    
            </div>
    
            <div class="controls">
                <button onclick="screenshot()">Screenshot</button>
                <form id="gifForm" action="">
                    <label for="">Duration of gif (seconds)</label>
                    <input type="text" name="duration">
                    <input id="videoForgif" type="text" name="video" hidden>
                    <input id="startForgif" type="text" name="start" hidden>
                    <label for="">FPS (50)</label>
                    <input id="startForgif" type="number" value="50" name="fps">
                    <button onclick="">GIF</button>
                </form>
                <div class="button-container">
                    <button onclick="toggleExportSection()">Show Exporting Section</button>
                    <button type="button" id="butCrop" onclick="toggleCrop()">Crop Video</button>
                </div>

                <div class="exporting-section" id="exportingSection">
                    <div class="exporting-exit" id="exporting-exit">x</div>
                    <h3>Export Options</h3>
                    <label for="videoFormat">Select Video Format:</label>
                    <select id="videoFormat" onchange="updateEncodingOptions(); displayFormatInfo();">
                        <option>Choose Formate</option>
                        <option value="mp4">MP4</option>
                        <option value="avi">AVI</option>
                        <option value="mov">MOV</option>
                        <option value="wmv">WMV</option>
                        <option value="webm">WEBM</option>
                        <option value="mkv">MKV</option>
                    </select>
                    
                    <label for="videoQuality">Select Video Quality:</label>
                    <select id="videoQuality">
                        <option>Quality</option>
                        <option value="480p">480p</option>
                        <option value="720p">720p</option>
                        <option value="1080p">1080p</option>
                        <option value="4k">4K</option>
                    </select>
                    
                    <label for="videoCodec">Select Video Codec:</label>
                    <select id="videoCodec" onchange="displayCodecInfo();">
                        <!-- Options will be populated dynamically -->
                    </select>

                    <!-- <div class="codec-docs" id="codecDocs">
                        <h4>Common Video Codecs</h4>
                        <p><span class="info-title">H.264:</span> The most common video codec for high-definition video. Balances good quality with compression efficiency, widely supported.</p>
                        <p><span class="info-title">H.265 (HEVC):</span> Improved compression over H.264, allowing for higher quality at lower bitrates. Increasingly used for 4K and higher resolutions, but requires more processing power.</p>
                        <p><span class="info-title">VP8/VP9:</span> Developed by Google, commonly used in WebM format. VP9 offers better compression efficiency compared to H.264.</p>
                        <p><span class="info-title">AV1:</span> A newer codec designed for high compression efficiency, especially for streaming. Still gaining adoption but offers excellent quality at lower bitrates.</p>
                    </div> -->
                    
                    <p class="info" id="formatInfo"></p>
                    <p class="info" id="codecInfo"></p>
                    
                    <button onclick="exportVideo()">Export Video</button>
                    
                </div>


            </div>

        </div>


        <div class="container">
            <h1>Video Editor</h1>

            <div class="setTrims">
                <label for="selectTrim">Select Trim</label>
                <select name="trim" id="selectTrim" onchange="changeOption()"></select>
                <button id="StartEnd" onclick="changeStartEnd()">End</button>
                <button id="setTrim" onclick="setTrimF()">Set Trim</button>
            </div>

            <form id="uploadForm" action="/cut/trim" method="POST">
                <div id="trims" class="form-group"></div>
                <div class="button-container">
                    <button type="button" id="add" onclick="addTrim()">Add Trim</button>
                    <button type="submit" id="upload">Edit Video</button>
                    
                </div>
                <input type="hidden" id="addCrop" name="addCrop" value="">
                <input type="hidden" name="resize" id="resize">

            </form>
        </div>
    </div>

    <!-- croping -->

    <div class="croping" id="croping">

        <h1>Video Cropper</h1>
        <div id="videoContainer">
            <video id="videoPlayer" controls>
                <source src="http://127.0.0.1:3000/video?path=D:\Coding\JS\nodejs\videoedit\uploads/uploadedoutput.mp4">
            </video>
            <div id="cropArea" style="width: 960px; height: 540px;">
                <div class="resize-handle se"></div>
                <div class="resize-handle sw"></div>
                <div class="resize-handle ne"></div>
                <div class="resize-handle nw"></div>
                <div class="resize-handle n"></div>
                <div class="resize-handle s"></div>
                <div class="resize-handle e"></div>
                <div class="resize-handle w"></div>
            </div>
        </div>
    
        <form id="videoForm" method="POST">
            <input type="number" id="width" name="width" placeholder="Width"  />
            <input type="number" id="height" name="height" placeholder="Height"  />
            <input type="number" id="x" name="x" placeholder="X Coordinate"  />
            <input type="number" id="y" name="y" placeholder="Y Coordinate"  />
            <button type="submit">Set Resize</button>
        </form>
    
        <div class="but-select">
            <button id="cropButton">Show Crop</button>
            <button id="resetCropButton">Reset Crop Area</button>
        </div>
    
        
    </div>
    
    <!-- end croping -->
    
    <!-- video -->
    <script src="/js/video.js">

    </script>

</body>
</html>